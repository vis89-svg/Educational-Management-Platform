<!-- templates/payment_select.html -->
{% load static %}
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Select Payment</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
    </head>
    <body class="bg-light">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <!-- Messages -->
                    {% if messages %}
                    <div>
                        {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} mb-2">
                            {{ message }}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <div class="card shadow-lg rounded-3">
                        <div
                            class="card-header text-center bg-primary text-white"
                        >
                            <h4>Select Exam & Payment Method</h4>
                        </div>
                        <div class="card-body">
                            <form method="post">
                                {% csrf_token %}

                                <!-- Exam selection -->
                                <div class="mb-3">
                                    <label for="exam" class="form-label"
                                        >Choose Exam</label
                                    >
                                    <select
                                        name="exam_id"
                                        id="exam"
                                        class="form-select"
                                        required
                                    >
                                        <option value="">
                                            -- Select Exam --
                                        </option>
                                        {% for exam in exams %}
                                        <option value="{{ exam.id }}">
                                            {{ exam.title }}
                                        </option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <!-- Payment method -->
                                <div class="mb-3">
                                    <label class="form-label"
                                        >Payment Method</label
                                    >
                                    <div class="form-check">
                                        <input
                                            class="form-check-input"
                                            type="radio"
                                            name="method"
                                            value="cash"
                                            id="methodCash"
                                            required
                                        />
                                        <label
                                            class="form-check-label"
                                            for="methodCash"
                                            >Cash (Admin Approval)</label
                                        >
                                    </div>
                                    <div class="form-check">
                                        <input
                                            class="form-check-input"
                                            type="radio"
                                            name="method"
                                            value="razorpay"
                                            id="methodRazorpay"
                                            required
                                        />
                                        <label
                                            class="form-check-label"
                                            for="methodRazorpay"
                                            >Razorpay (Online Payment)</label
                                        >
                                    </div>

                                    <!-- Cash amount input -->
                                    <div id="cash_amount_field" style="display:none; margin-top:10px;">
                                        <label for="amount" class="form-label">Enter Cash Amount (â‚¹)</label>
                                        <input type="number" name="amount" id="amount" min="1" class="form-control" />
                                    </div>
                                </div>

                                <div class="d-grid">
                                    <button
                                        type="submit"
                                        class="btn btn-success"
                                    >
                                        Proceed
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const cashField = document.getElementById("cash_amount_field");
            cashField.style.display = "none"; // hide by default

            document.querySelectorAll('input[name="method"]').forEach((el) => {
                el.addEventListener('change', function() {
                    if (this.value === "razorpay") {
                        cashField.style.display = "block";
                    } else {
                        cashField.style.display = "none"; // hide for Cash
                    }
                });
            });
        </script>
    </body>
</html>
<!-- templates/payment_select.html working -->